# Minimal kernel configuration for OneFileLinux
# Focused on small size while maintaining essential functionality

# General setup
CONFIG_LOCALVERSION="-onerecovery-minimal"
CONFIG_KERNEL_XZ=y
CONFIG_KERNEL_LZ4=n
CONFIG_SYSVIPC=y
CONFIG_POSIX_MQUEUE=y
CONFIG_FHANDLE=y
CONFIG_AUDIT=n
CONFIG_NO_HZ_IDLE=y
CONFIG_HIGH_RES_TIMERS=y
CONFIG_PREEMPT=n
CONFIG_BSD_PROCESS_ACCT=n
CONFIG_TASKSTATS=n
CONFIG_MEMCG=y
CONFIG_NAMESPACES=y
CONFIG_USER_NS=y

# Networking support
CONFIG_NET=y
CONFIG_PACKET=y
CONFIG_UNIX=y
CONFIG_INET=y
CONFIG_IP_MULTICAST=n
CONFIG_IP_ADVANCED_ROUTER=n
CONFIG_IPV6=n
CONFIG_NETFILTER=y
CONFIG_NF_CONNTRACK=y
CONFIG_NF_TABLES=n
CONFIG_NET_SCHED=n

# Device Drivers
CONFIG_CONNECTOR=y
CONFIG_UEVENT_HELPER=n
CONFIG_DEVTMPFS=y
CONFIG_BLK_DEV=y
CONFIG_BLK_DEV_SD=y
CONFIG_BLK_DEV_SR=y
CONFIG_ATA=y
CONFIG_ATA_PIIX=y
CONFIG_SATA_AHCI=y
CONFIG_USB_SUPPORT=y
CONFIG_USB=y
CONFIG_USB_XHCI_HCD=y
CONFIG_USB_EHCI_HCD=y
CONFIG_USB_UHCI_HCD=y
CONFIG_USB_STORAGE=y
CONFIG_USB_HID=y
CONFIG_HID_GENERIC=y
CONFIG_SOUND=n
CONFIG_SND=n
CONFIG_DMADEVICES=y
CONFIG_WLAN=n
CONFIG_SLIP=n
CONFIG_PPP=n
CONFIG_USB_NET_DRIVERS=n

# File systems
CONFIG_EXT4_FS=y
CONFIG_EXT4_USE_FOR_EXT2=y
CONFIG_EXT3_FS=n
CONFIG_EXT2_FS=n
CONFIG_REISERFS_FS=n
CONFIG_JFS_FS=n
CONFIG_XFS_FS=n
CONFIG_BTRFS_FS=n
CONFIG_FUSE_FS=y
CONFIG_ISO9660_FS=y
CONFIG_UDF_FS=y
CONFIG_VFAT_FS=y
CONFIG_NTFS_FS=n
CONFIG_NTFS3_FS=n
CONFIG_PROC_FS=y
CONFIG_SYSFS=y
CONFIG_TMPFS=y
CONFIG_SQUASHFS=n
CONFIG_ECRYPT_FS=n
CONFIG_HFS_FS=n
CONFIG_HFSPLUS_FS=n

# Kernel hacking
CONFIG_DEBUG_KERNEL=n
CONFIG_DEBUG_INFO=n
CONFIG_DYNAMIC_DEBUG=n
CONFIG_MAGIC_SYSRQ=y
CONFIG_DEBUG_BUGVERBOSE=n
CONFIG_DEBUG_LIST=n
CONFIG_DETECT_HUNG_TASK=n
CONFIG_SCHEDSTATS=n
CONFIG_DEBUG_SPINLOCK=n
CONFIG_DEBUG_MUTEXES=n
CONFIG_DEBUG_ATOMIC_SLEEP=n

# Security options
CONFIG_SECURITY=y
CONFIG_SECURITY_NETWORK=n
CONFIG_SECURITY_SELINUX=n
CONFIG_SECURITY_APPARMOR=n
CONFIG_SECURITY_YAMA=n
CONFIG_IMA=n
CONFIG_EVM=n

# Cryptographic API
CONFIG_CRYPTO=y
CONFIG_CRYPTO_MANAGER=y
CONFIG_CRYPTO_USER=n
CONFIG_CRYPTO_HMAC=y
CONFIG_CRYPTO_MD5=y
CONFIG_CRYPTO_SHA256=y
CONFIG_CRYPTO_AES=y
CONFIG_CRYPTO_ARC4=n
CONFIG_CRYPTO_DES=n
CONFIG_CRYPTO_USER_API=n

# CPU/Task time and stats accounting
CONFIG_TASK_DELAY_ACCT=n
CONFIG_SCHED_STACK_END_CHECK=n

# EFI stub
CONFIG_EFI=y
CONFIG_EFI_STUB=y
CONFIG_EFI_MIXED=y

# Reduce debugging
CONFIG_PM_DEBUG=n
CONFIG_PM_ADVANCED_DEBUG=n
CONFIG_PM_TEST_SUSPEND=n
CONFIG_CRC_T10DIF=n
CONFIG_DEBUG_MEMORY_INIT=n
CONFIG_DETECT_HUNG_TASK=n
CONFIG_TIMER_STATS=n

# Essential processor support
CONFIG_SMP=y

# Disable unneeded hardware support
CONFIG_INFINIBAND=n
CONFIG_FIREWIRE=n
CONFIG_PCMCIA=n
CONFIG_X86_MCE=n
CONFIG_AMD_MEM_ENCRYPT=n
CONFIG_INTEL_MEI=n
CONFIG_INTEL_TXT=n
CONFIG_CHROME_PLATFORMS=n
CONFIG_HYPERV=n
CONFIG_VMWARE_BALLOON=n
CONFIG_VMXNET3=n
CONFIG_MACINTOSH_DRIVERS=n

# Disable unused network protocols
CONFIG_INET_XFRM_MODE_TRANSPORT=n
CONFIG_INET_XFRM_MODE_TUNNEL=n
CONFIG_INET_XFRM_MODE_BEET=n
CONFIG_INET_LRO=n
CONFIG_INET_DIAG=n
CONFIG_INET6_XFRM_MODE_TRANSPORT=n
CONFIG_INET6_XFRM_MODE_TUNNEL=n
CONFIG_INET6_XFRM_MODE_BEET=n

# Disable unused input support
CONFIG_INPUT_JOYSTICK=n
CONFIG_INPUT_TABLET=n
CONFIG_INPUT_TOUCHSCREEN=n

# Graphics - minimal
CONFIG_FB=y
CONFIG_FB_EFI=y
CONFIG_FB_VESA=y
CONFIG_VGA_CONSOLE=y
CONFIG_FRAMEBUFFER_CONSOLE=y
CONFIG_DRM=n

# Misc configuration
CONFIG_RTC_CLASS=y
CONFIG_EFI_VARS=y
CONFIG_DMI=y
CONFIG_NETDEVICES=y
CONFIG_KEYBOARD_ATKBD=y
CONFIG_SERIAL_8250=y
CONFIG_THERMAL=y
CONFIG_ACPI=y
CONFIG_POWER_SUPPLY=y
CONFIG_X86_MSR=n

# Disable virtualization
CONFIG_KVM_GUEST=n
CONFIG_PARAVIRT=n
CONFIG_HYPERVISOR_GUEST=n

# Misc drivers to disable
CONFIG_SCSI_LOWLEVEL=n
CONFIG_I2C_CHARDEV=n
CONFIG_SENSORS_CORETEMP=n
CONFIG_AGP=n
CONFIG_MEDIA_SUPPORT=n
CONFIG_VIDEO_DEV=n